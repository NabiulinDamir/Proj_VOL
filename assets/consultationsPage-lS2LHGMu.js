import"./loader-IXSX5Ee3.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as r,o as l,f as g,r as C,s as H,a,h as $,m as e,t as d,F as f,n as p,p as V,A as L,b as v,e as w,q as h}from"./index-D6p-SJwj.js";import{u as B,i as W,p as N}from"./consultation-LfPE-kqQ.js";import{t as k,f as u}from"./format-CMfQEa-o.js";function P(_,n,i){const c=k(_,i==null?void 0:i.in);return c.setHours(n),c}function S(_,n,i){const c=k(_,i==null?void 0:i.in);return c.setMinutes(n),c}const T={id:"loader_container"},q={key:0,class:"line-loader"},A={__name:"lineLoader",props:{modelValue:{type:Boolean,default:!1}},setup(_){return(n,i)=>(l(),r("div",T,[_.modelValue?(l(),r("div",q)):g("",!0)]))}},F=D(A,[["__scopeId","data-v-93f303e0"]]),I={id:"consultationTable_container"},z={id:"control_panel"},R={id:"selector_container"},U={id:"time_container"},j={class:"text_container"},E={id:"date_table_container"},O={id:"date_container"},G={id:"table_container"},J={class:"cons_content text_container_date"},K={class:"info_container"},Q={__name:"consultationTable",setup(_){const n=B(),i=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"],c=["пн","вт","ср","чт","пт","сб","вс"],y=C(!1);H(async()=>{y.value=!0,await n.setConsByUser(),y.value=!1});const x=(m,t)=>{const s=i.length*60,o=new Date(m),M=new Date(t);return Math.floor((M-o)/(1e3*60))*100/s},b=m=>{const t=i.length*60,s=P(S(m,0),8),o=new Date(m);return Math.floor((o-s)/(1e3*60))*100/t};return(m,t)=>(l(),r("div",I,[a("div",z,[a("div",R,[a("div",{class:"selected_date_button",onClick:t[0]||(t[0]=s=>e(n).setDefaultDates())},"сегодня"),a("div",{class:"selected_date_button",onClick:t[1]||(t[1]=s=>{e(n).prevWeek()})},"<"),a("div",null,d(`${e(n).startDate?e(u)(e(n).startDate,"dd.MM"):" "} -
                         ${e(n).endDate?e(u)(e(n).endDate,"dd.MM"):" "}`),1),a("div",{class:"selected_date_button",onClick:t[2]||(t[2]=s=>e(n).nextWeek())},">")])]),$(F,{modelValue:e(n).uploadRequest,"onUpdate:modelValue":t[3]||(t[3]=s=>e(n).uploadRequest=s)},null,8,["modelValue"]),a("div",null,[a("div",{id:"datetime_time_container",onClick:t[4]||(t[4]=(...s)=>m.sesDefaultDate&&m.sesDefaultDate(...s))},[t[5]||(t[5]=a("div",{id:"datetime_text",class:"text_container"},"дата",-1)),a("div",U,[(l(),r(f,null,p(i,s=>a("div",j,d(s),1)),64))])]),a("div",E,[a("div",O,[(l(!0),r(f,null,p(e(n).Dates,s=>(l(),r("div",{class:V(["text_container text_container_date",{today:e(W)(s,new Date)}])},d(`${e(u)(s,"MM.dd")}(${c[(Number(e(u)(s,"e"))+5)%7]})`),3))),256))]),a("div",G,[(l(!0),r(f,null,p(e(n).Dates,s=>(l(),r("div",J,[(l(!0),r(f,null,p(e(n).getConsForDate(s),o=>(l(),r("div",{class:"cons_container",style:L({width:x(o.start_time,o.end_time)+"%",left:b(o.start_time)+"%"}),key:o.id},[v(d(`${e(u)(o.start_time,"HH:mm")}-${e(u)(o.end_time,"HH:mm")}`)+" ",1),(l(),w(N,{class:"popover",key:s,isLoading:!1},{content:h(()=>[a("div",K,[t[6]||(t[6]=v(" Группа:")),a("div",null,d(o.group_name),1),t[7]||(t[7]=v(" Предмет:")),a("div",null,d(o.subject_name),1),t[8]||(t[8]=v(" Начало:")),a("div",null,d(e(u)(o.start_time,"HH:mm")),1),t[9]||(t[9]=v(" Конец:")),a("div",null,d(e(u)(o.end_time,"HH:mm")),1)])]),_:2},1024))],4))),128))]))),256))])])])]))}},X=D(Q,[["__scopeId","data-v-952b5349"]]),Y={class:"consultationsPage_container"},Z={__name:"consultationsPage",setup(_){return(n,i)=>(l(),r("div",Y,[$(X)]))}},it=D(Z,[["__scopeId","data-v-e7304ad7"]]);export{it as default};
