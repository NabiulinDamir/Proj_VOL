import{l as v}from"./myButtonOp.vue_vue_type_style_index_0_scoped_ec3437d6_lang-mgYbswUk.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as D,i as C,l as b,q as k,A as S,H as B,c as j,o as y,e as M,f as _,x as R,G as x,E as I,u as U}from"./index-CHEkG5_n.js";import{t as h,c as W,n as q,s as p,f as g}from"./format-CMfQEa-o.js";const L={__name:"popover",props:{isLoading:{type:Boolean,required:!1,default:!1}},setup(t){const e=D(null),s=D(0),a=D(!1),c=t,T=C(()=>({"--object-shift":`${s.value}px`}));b(()=>c.isLoading,async(n,r)=>{n||(d(),console.log("Пропс вызван"))}),k(async()=>{window.addEventListener("resize",m),a.value=!1,await S(),setTimeout(()=>{d()},1e3)}),B(()=>{window.removeEventListener("resize",m)});const d=()=>{const n=e.value;n&&(s.value=0,requestAnimationFrame(()=>{const r=n.getBoundingClientRect(),u=document.body.offsetWidth,f=r.left+n.offsetWidth;f>u?s.value=f-u+10:s.value=0}))},m=((n,r)=>{let l;return(...u)=>{clearTimeout(l),l=setTimeout(()=>{n.apply(this,u)},r)}})(d,500);return(n,r)=>(y(),j("div",{class:"Container_main",ref_key:"containerRef",ref:e,style:x(T.value)},[a.value?(y(),M(v,{key:0})):_("",!0),a.value?_("",!0):R(n.$slots,"content",{key:1},void 0,!0)],4))}},G=w(L,[["__scopeId","data-v-c957163b"]]);function i(t,e,s){const a=h(t,s==null?void 0:s.in);return isNaN(e)?W(t,NaN):(e&&a.setDate(a.getDate()+e),a)}function o(t,e,s){const[a,c]=q(s==null?void 0:s.in,t,e);return+p(a)==+p(c)}function A(t,e){return+h(t)<+h(e)}const E=[{id:1,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-04-15T11:30:00",end_time:"2025-04-15T13:00:00"},{id:22,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-04-14T11:30:00",end_time:"2025-04-14T13:00:00"},{id:2,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-04-16T13:20:00",end_time:"2025-04-16T14:40:00"},{id:3,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-04-16T09:00:00",end_time:"2025-04-16T12:30:00"},{id:4,group_name:"РИС-21-2Б",subject_name:"ООП",start_time:"2025-04-19T13:20:00",end_time:"2025-04-19T16:40:00"}],N={consultation:E},z={async getAllCons(t,e,s){return console.log("Запрос консультаций"),new Promise(a=>{setTimeout(()=>{a(N.consultation)},500)})}},H=I("Consultation",{state:()=>({group_id:null,consultations:[],startDate:null,endDate:null,Dates:[],uploadRequest:!1}),getters:{userToken:()=>{var e;return((e=U().token)==null?void 0:e.id)??null},getConsForDate(){return t=>this.consultations.filter(e=>e.start_time.includes(g(t,"yyyy-MM-dd")))},getIncludesDateInDates(){return t=>this.Dates.some(e=>o(e,t))&&!o(t,this.startDate)&&!o(t,this.endDate)},getIsStartDate(){return t=>o(t,this.startDate)},getIsEndDate(){return t=>o(t,this.endDate)},getIsConsDate(){return t=>this.consultations.some(e=>e.start_time.includes(g(t,"yyyy-MM-dd")))}},actions:{setDates(){if(A(this.startDate,this.endDate)){this.Dates=[];let t=new Date(this.startDate);for(;!o(t,this.endDate);)this.Dates.push(new Date(t)),t=i(t,1);this.Dates.push(t)}else o(this.startDate,this.endDate)&&(this.Dates=[this.startDate])},async setDefaultDates(){const t=new Date,e=t.getDay(),s=e===0?-6:1-e;this.startDate=i(t,s),this.endDate=i(this.startDate,6),this.setDates(),await this.setConsByUser()},async setScopeDates(t){const e=new Date(t),s=e.getDay(),a=s===0?-6:1-s;this.startDate=i(e,a),this.endDate=i(this.startDate,6),this.setDates(),await this.setConsByUser()},async nextWeek(){this.startDate=i(this.startDate,7),this.endDate=i(this.endDate,7),this.setDates(),await this.setConsByUser()},async prevWeek(){this.startDate=i(this.startDate,-7),this.endDate=i(this.endDate,-7),this.setDates(),await this.setConsByUser()},async setConsByUser(){(!this.startDate||!this.endDate)&&this.setDefaultDates();try{this.uploadRequest=!0,this.consultations=await z.getAllCons(this.group_id,this.startDate,this.endDate),this.uploadRequest=!1}catch(t){console.error("Ошибка при загрузке консультаций:",t)}}}});export{i as a,o as i,G as p,H as u};
