import{l as T}from"./loader-CNYaqzXz.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as h,k as B,l as S,s as k,y as R,B as E,c as I,o as _,e as M,f as p,C as U,A as L,i as j}from"./index-CmD-bgp_.js";import{t as m,c as q,n as x,s as g,f as C}from"./format-CMfQEa-o.js";const A={__name:"popover",props:{isLoading:{type:Boolean,required:!1,default:!1}},setup(t){const e=h(null),s=h(0),a=h(!1),c=t,v=B(()=>({"--object-shift":`${s.value}px`}));S(()=>c.isLoading,async(n,r)=>{n||(D(),console.log("Пропс вызван"))}),k(async()=>{window.addEventListener("resize",f),a.value=!1,await R(),setTimeout(()=>{D()},1e3)}),E(()=>{window.removeEventListener("resize",f)});const D=()=>{const n=e.value;n&&(s.value=0,requestAnimationFrame(()=>{const r=n.getBoundingClientRect(),d=document.body.offsetWidth,y=r.left+n.offsetWidth;y>d?s.value=y-d+10:s.value=0}))},f=((n,r)=>{let l;return(...d)=>{clearTimeout(l),l=setTimeout(()=>{n.apply(this,d)},r)}})(D,500);return(n,r)=>(_(),I("div",{class:"Container_main",ref_key:"containerRef",ref:e,style:L(v.value)},[a.value?(_(),M(T,{key:0})):p("",!0),a.value?p("",!0):U(n.$slots,"content",{key:1},void 0)],4))}},H=b(A,[["__scopeId","data-v-c0d659fa"]]);function u(t,e,s){const a=m(t,s==null?void 0:s.in);return isNaN(e)?q(t,NaN):(e&&a.setDate(a.getDate()+e),a)}function i(t,e,s){const[a,c]=x(s==null?void 0:s.in,t,e);return+g(a)==+g(c)}function o(t,e){return+m(t)<+m(e)}function w(t,e,s){return u(t,-e,s)}const N=[{id:1,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-03-15T11:30:00",end_time:"2025-03-15T13:00:00"},{id:22,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-03-14T11:30:00",end_time:"2025-03-14T13:00:00"},{id:2,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-03-16T13:20:00",end_time:"2025-03-16T14:40:00"},{id:3,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-03-16T09:00:00",end_time:"2025-03-16T12:30:00"},{id:4,group_name:"РИС-21-2Б",subject_name:"ООП",start_time:"2025-03-19T13:20:00",end_time:"2025-03-19T16:40:00"}],z={consultation:N},F={async getAllCons(t,e,s){return console.log("Запрос консультаций"),new Promise(a=>{setTimeout(()=>{a(z.consultation)},500)})}},J=j("Consultation",{state:()=>({group_id:null,consultations:[],startDate:null,endDate:null,Dates:[],uploadRequest:!1}),getters:{getConsForDate(){return t=>this.consultations.filter(e=>e.start_time.includes(C(t,"yyyy-MM-dd")))},getIncludesDateInDates(){return t=>this.Dates.some(e=>i(e,t))&&!i(t,this.startDate)&&!i(t,this.endDate)},getIsStartDate(){return t=>i(t,this.startDate)},getIsEndDate(){return t=>i(t,this.endDate)},getIsConsDate(){return t=>this.consultations.some(e=>e.start_time.includes(C(t,"yyyy-MM-dd")))}},actions:{setDates(){if(o(this.startDate,this.endDate)){this.Dates=[];let t=new Date(this.startDate);for(;!i(t,this.endDate);)this.Dates.push(new Date(t)),t=u(t,1);this.Dates.push(t)}else i(this.startDate,this.endDate)&&(this.Dates=[this.startDate])},async setDefaultDates(){this.startDate=new Date,this.endDate=u(this.startDate,6),this.setDates(),await this.setConsByUser()},async subtractStartDate(){this.startDate=w(this.startDate,1),this.setDates(),this.setConsByUser()},async appendStartDate(){o(this.startDate,this.endDate)&&(this.startDate=u(this.startDate,1),this.setDates(),await this.setConsByUser())},async subtractEndtDate(){o(this.startDate,this.endDate)&&(this.endDate=w(this.endDate,1),this.setDates(),await this.setConsByUser())},async appendEndtDate(){this.endDate=u(this.endDate,1),this.setDates(),await this.setConsByUser()},setCalendarStartDate(t){o(this.endDate,t)?(this.startDate=this.endDate,this.endDate=t):this.startDate=t,this.setDates()},setCalendarEndDate(t){o(t,this.startDate)?(this.endDate=this.startDate,this.startDate=t):this.endDate=t,this.setDates()},async setConsByUser(){if(!this.startDate||!this.endDate)await this.setDefaultDates();else try{this.uploadRequest=!0,this.consultations=await F.getAllCons(this.group_id,this.startDate,this.endDate),this.uploadRequest=!1}catch(t){console.error("Ошибка при загрузке консультаций:",t)}}}});export{u as a,i,H as p,w as s,J as u};
