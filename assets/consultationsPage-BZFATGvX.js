import{l as L}from"./loader-tHLDm6w_.js";import{t as k,u as $,f as u,i as B,p as E}from"./consultation-ij8_35bc.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as P,s as N,c as d,a as e,e as b,f as M,b as m,t as c,m as s,F as y,n as D,o as l,p as T,A as V,q as W,h as A}from"./index-CBhXWMJI.js";function F(f,a,i){const _=k(f,i==null?void 0:i.in);return _.setHours(a),_}function z(f,a,i){const _=k(f,i==null?void 0:i.in);return _.setMinutes(a),_}const I={id:"consultationTable_container"},j={id:"control_panel"},q={id:"selector_container"},O={key:1},U={id:"time_container"},G={class:"text_container"},J={id:"date_table_container"},K={id:"date_container"},Q={id:"table_container"},R={class:"cons_content text_container_date"},X={class:"info_container"},Y={__name:"consultationTable",setup(f){const a=$(),i=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"],_=["пн","вт","ср","чт","пт","сб","вс"],r=P(!1);N(async()=>{r.value=!0,await a.setConsByUser(),r.value=!1});const w=async()=>{r.value=!0,await a.subtractStartDate(),r.value=!1},x=async()=>{r.value=!0,await a.appendStartDate(),r.value=!1},C=async()=>{r.value=!0,await a.subtractEndtDate(),r.value=!1},H=async()=>{r.value=!0,await a.appendEndtDate(),r.value=!1},S=(v,t)=>{const n=i.length*60,o=new Date(v),p=new Date(t);return Math.floor((p-o)/(1e3*60))*100/n},h=v=>{const t=i.length*60,n=F(z(v,0),8),o=new Date(v);return Math.floor((o-n)/(1e3*60))*100/t};return(v,t)=>(l(),d("div",I,[e("div",j,[e("div",q,[t[1]||(t[1]=m(" Начало: ")),e("div",{class:"selected_date_button",onClick:w},"<"),e("div",null,c(s(a).startDate?s(u)(s(a).startDate,"dd.MM.yyyy"):"---"),1),e("div",{class:"selected_date_button",onClick:x},">"),t[2]||(t[2]=m(" Конец: ")),e("div",{class:"selected_date_button",onClick:C},"<"),e("div",null,c(s(a).endDate?s(u)(s(a).endDate,"dd.MM.yyyy"):"---"),1),e("div",{class:"selected_date_button",onClick:H},">")])]),r.value?(l(),b(L,{key:0})):M("",!0),r.value?M("",!0):(l(),d("div",O,[e("div",{id:"datetime_time_container",onClick:t[0]||(t[0]=(...n)=>v.sesDefaultDate&&v.sesDefaultDate(...n))},[t[3]||(t[3]=e("div",{id:"datetime_text",class:"text_container"},"дата",-1)),e("div",U,[(l(),d(y,null,D(i,n=>e("div",G,c(n),1)),64))])]),e("div",J,[e("div",K,[(l(!0),d(y,null,D(s(a).Dates,n=>(l(),d("div",{class:T(["text_container text_container_date",{today:s(B)(n,new Date)}])},c(`${s(u)(n,"MM.dd")}(${_[s(u)(n,"e")-1]})`),3))),256))]),e("div",Q,[(l(!0),d(y,null,D(s(a).Dates,n=>(l(),d("div",R,[(l(!0),d(y,null,D(s(a).getConsForDate(n),o=>(l(),d("div",{class:"cons_container",style:V({width:S(o.start_time,o.end_time)+"%",left:h(o.start_time)+"%"}),key:o.id},[m(c(`${s(u)(o.start_time,"HH:mm")}-${s(u)(o.end_time,"HH:mm")}`)+" ",1),(l(),b(E,{class:"popover",key:n,isLoading:!1},{content:W(()=>[e("div",X,[t[4]||(t[4]=m(" Группа:")),e("div",null,c(o.group_name),1),t[5]||(t[5]=m(" Предмет:")),e("div",null,c(o.subject_name),1),t[6]||(t[6]=m(" Начало:")),e("div",null,c(s(u)(o.start_time,"HH:mm")),1),t[7]||(t[7]=m(" Конец:")),e("div",null,c(s(u)(o.end_time,"HH:mm")),1)])]),_:2},1024))],4))),128))]))),256))])])]))]))}},Z=g(Y,[["__scopeId","data-v-0f1da3cc"]]),tt={class:"consultationsPage_container"},et={__name:"consultationsPage",setup(f){return(a,i)=>(l(),d("div",tt,[A(Z)]))}},rt=g(et,[["__scopeId","data-v-e7304ad7"]]);export{rt as default};
