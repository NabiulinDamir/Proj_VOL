import{l as T}from"./loader-Cd9Zgtxz.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as D,k as w,l as C,s as k,y as B,B as j,c as S,o as y,e as M,f as _,C as R,A as I,i as x}from"./index-D9WfEH5O.js";import{t as h,c as L,n as W,s as p,f as g}from"./format-CMfQEa-o.js";const q={__name:"popover",props:{isLoading:{type:Boolean,required:!1,default:!1}},setup(t){const e=D(null),s=D(0),a=D(!1),u=t,v=w(()=>({"--object-shift":`${s.value}px`}));C(()=>u.isLoading,async(n,r)=>{n||(d(),console.log("Пропс вызван"))}),k(async()=>{window.addEventListener("resize",m),a.value=!1,await B(),setTimeout(()=>{d()},1e3)}),j(()=>{window.removeEventListener("resize",m)});const d=()=>{const n=e.value;n&&(s.value=0,requestAnimationFrame(()=>{const r=n.getBoundingClientRect(),c=document.body.offsetWidth,f=r.left+n.offsetWidth;f>c?s.value=f-c+10:s.value=0}))},m=((n,r)=>{let l;return(...c)=>{clearTimeout(l),l=setTimeout(()=>{n.apply(this,c)},r)}})(d,500);return(n,r)=>(y(),S("div",{class:"Container_main",ref_key:"containerRef",ref:e,style:I(v.value)},[a.value?(y(),M(T,{key:0})):_("",!0),a.value?_("",!0):R(n.$slots,"content",{key:1},void 0)],4))}},$=b(q,[["__scopeId","data-v-c957163b"]]);function i(t,e,s){const a=h(t,s==null?void 0:s.in);return isNaN(e)?L(t,NaN):(e&&a.setDate(a.getDate()+e),a)}function o(t,e,s){const[a,u]=W(s==null?void 0:s.in,t,e);return+p(a)==+p(u)}function A(t,e){return+h(t)<+h(e)}const N=[{id:1,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-03-15T11:30:00",end_time:"2025-03-15T13:00:00"},{id:22,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-03-14T11:30:00",end_time:"2025-03-14T13:00:00"},{id:2,group_name:"РИС-21-1Б",subject_name:"Mathematics",start_time:"2025-03-16T13:20:00",end_time:"2025-03-16T14:40:00"},{id:3,group_name:"РИС-21-1Б",subject_name:"ООП",start_time:"2025-03-16T09:00:00",end_time:"2025-03-16T12:30:00"},{id:4,group_name:"РИС-21-2Б",subject_name:"ООП",start_time:"2025-03-19T13:20:00",end_time:"2025-03-19T16:40:00"}],U={consultation:N},z={async getAllCons(t,e,s){return console.log("Запрос консультаций"),new Promise(a=>{setTimeout(()=>{a(U.consultation)},500)})}},G=x("Consultation",{state:()=>({group_id:null,consultations:[],startDate:null,endDate:null,Dates:[],uploadRequest:!1}),getters:{getConsForDate(){return t=>this.consultations.filter(e=>e.start_time.includes(g(t,"yyyy-MM-dd")))},getIncludesDateInDates(){return t=>this.Dates.some(e=>o(e,t))&&!o(t,this.startDate)&&!o(t,this.endDate)},getIsStartDate(){return t=>o(t,this.startDate)},getIsEndDate(){return t=>o(t,this.endDate)},getIsConsDate(){return t=>this.consultations.some(e=>e.start_time.includes(g(t,"yyyy-MM-dd")))}},actions:{setDates(){if(A(this.startDate,this.endDate)){this.Dates=[];let t=new Date(this.startDate);for(;!o(t,this.endDate);)this.Dates.push(new Date(t)),t=i(t,1);this.Dates.push(t)}else o(this.startDate,this.endDate)&&(this.Dates=[this.startDate])},async setDefaultDates(){const t=new Date,e=t.getDay(),s=e===0?-6:1-e;this.startDate=i(t,s),this.endDate=i(this.startDate,6),this.setDates(),await this.setConsByUser()},async nextWeek(){this.startDate=i(this.startDate,7),this.endDate=i(this.endDate,7),this.setDates(),await this.setConsByUser()},async prevWeek(){this.startDate=i(this.startDate,-7),this.endDate=i(this.endDate,-7),this.setDates(),await this.setConsByUser()},async setConsByUser(){(!this.startDate||!this.endDate)&&this.setDefaultDates();try{this.uploadRequest=!0,this.consultations=await z.getAllCons(this.group_id,this.startDate,this.endDate),this.uploadRequest=!1}catch(t){console.error("Ошибка при загрузке консультаций:",t)}}}});export{i as a,o as i,$ as p,G as u};
