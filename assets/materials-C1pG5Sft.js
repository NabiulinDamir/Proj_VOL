import{D as i,E as o,u as a}from"./index-CHEkG5_n.js";import{u as n}from"./theoryCreateCard.vue_vue_type_style_index_0_scoped_e8924305_lang-8d9iiHpr.js";import{f as l}from"./format-CMfQEa-o.js";const s={getLabs(e){return i.assignment.filter(r=>r.group_id===e)},getTheory(e){return i.theory_material.filter(r=>r.group_id===e)},async GetLabsByGroupAndDisciplineId(e){return new Promise(r=>{setTimeout(()=>{r(i.assignment.filter(t=>t.discipline_id==e))},500)})},async GetTheoryByGroupAndDisciplineId(e){return new Promise(r=>{setTimeout(()=>{r(i.theory_material.filter(t=>t.discipline_id==e))},500)})},GetTheoryIdForLabById(e){return i.assignment_theory_material.filter(r=>r.assignment_id===e).map(r=>r.theory_material_id)},async GetDeadlinesByGroupId(e){return new Promise(r=>{setTimeout(()=>{r(i.deadlines)},500)})}},y=o("AllMaterials",{state:()=>({Labs:[],TheoryMaterial:[],Deadlines:[],navigateLabId:null}),getters:{userToken:()=>{var r;return((r=a().token)==null?void 0:r.id)??null},userIsTeacher:()=>a().isTeacher,selectedDisciplineId:()=>n().selectedDisciplineId??null,selectedDiscipline:()=>{const e=n();return e.getDisciplineById(e.selectedDisciplineId)??null},allDiscipline:()=>n().allDisciplines??[],getTheoryForLabById(){return e=>{const r=s.GetTheoryIdForLabById(e);return this.TheoryMaterial.filter(t=>r.includes(t.id))}},deadlineOnThisDate(){return e=>this.Deadlines.some(r=>r.date.includes(l(e,"yyyy-MM-dd")))},getDedlinesForDate(){return e=>this.Deadlines.filter(r=>r.date.includes(e))}},actions:{async setDeadlines(e){try{this.Deadlines=await s.GetDeadlinesByGroupId(e)}catch(r){console.error("ошибка в запросе к дедлайнам",r)}},async setLabs(){try{this.Labs=await s.GetLabsByGroupAndDisciplineId(this.selectedDisciplineId);return}catch(e){console.error("ошибка в запросе к лабам",e)}},async setTheory(){try{const e=await s.GetTheoryByGroupAndDisciplineId(this.selectedDisciplineId);this.TheoryMaterial=e.map(r=>({...r,file_load:!1}));return}catch(e){console.error("ошибка в запросе к теориям",e)}}}});export{y as u};
